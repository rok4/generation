<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta name="generator" content="Doxygen 1.8.17" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Outils de manipulation raster ROK4</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="resize.js"></script>
    <script type="text/javascript" src="navtreedata.js"></script>
    <script type="text/javascript" src="navtree.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="search/searchdata.js"></script>
    <script type="text/javascript" src="search/search.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css" />
</head>
<body><!-- Généré par Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Recherche','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('manageNodata_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Fonctions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Référence du fichier manageNodata.cpp</div>  </div>
</div><!--header-->
<div class="contents">

<p>Gère la couleur des pixels de nodata.  
<a href="#details">Plus de détails...</a></p>
<div class="textblock"><code>#include &lt;rok4/enums/Format.h&gt;</code><br />
<code>#include &lt;rok4/utils/Cache.h&gt;</code><br />
<code>#include &lt;rok4/image/file/TiffNodataManager.h&gt;</code><br />
<code>#include &lt;boost/log/core.hpp&gt;</code><br />
<code>#include &lt;boost/log/trivial.hpp&gt;</code><br />
<code>#include &lt;boost/log/utility/setup/common_attributes.hpp&gt;</code><br />
<code>#include &lt;boost/log/utility/setup/console.hpp&gt;</code><br />
<code>#include &lt;cstdlib&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;config.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Fonctions</h2></td></tr>
<tr class="memitem:a2ef30c42cbc289d899a8be5d2d8f77d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manageNodata_8cpp.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a> ()</td></tr>
<tr class="memdesc:a2ef30c42cbc289d899a8be5d2d8f77d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Affiche l'utilisation et les différentes options de la commande manageNodata <a class="el" href="manageNodata_8cpp.html#aecfcd8d5595d8ba1a38ef3c624d1186a">help</a>.  <a href="manageNodata_8cpp.html#a2ef30c42cbc289d899a8be5d2d8f77d0">Plus de détails...</a><br /></td></tr>
<tr class="separator:a2ef30c42cbc289d899a8be5d2d8f77d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b3d9b8e072456b074bb9c0759952916"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manageNodata_8cpp.html#a7b3d9b8e072456b074bb9c0759952916">error</a> (std::string message, int error_code=-1)</td></tr>
<tr class="memdesc:a7b3d9b8e072456b074bb9c0759952916"><td class="mdescLeft">&#160;</td><td class="mdescRight">Affiche un message d'erreur, l'utilisation de la commande et sort en erreur.  <a href="manageNodata_8cpp.html#a7b3d9b8e072456b074bb9c0759952916">Plus de détails...</a><br /></td></tr>
<tr class="separator:a7b3d9b8e072456b074bb9c0759952916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manageNodata_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction principale de l'outil manageNodata.  <a href="manageNodata_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">Plus de détails...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aecfcd8d5595d8ba1a38ef3c624d1186a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manageNodata_8cpp.html#aecfcd8d5595d8ba1a38ef3c624d1186a">help</a></td></tr>
<tr class="separator:aecfcd8d5595d8ba1a38ef3c624d1186a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description détaillée</h2>
<div class="textblock"><p>Gère la couleur des pixels de nodata. </p>
<dl class="section author"><dt>Auteur</dt><dd>Institut national de l'information géographique et forestière</dd></dl>
<p>Cet outil est destiné à : </p><ul>
<li>identifier les pixels de nodata à partir d'une valeur et d'une tolérance </li>
<li>modifier les pixels qui contiennent cette valeur </li>
<li>écrire le masque de données associé à l'image</li>
</ul>
<p>L'outil gère les images à canaux entiers non signés sur 8 bits ou flottant sur 32 bits.</p>
<p>Les paramètres sont les suivants :</p>
<ul>
<li>l'image en entrée (obligatoire) </li>
<li>l'image en sortie, au format TIFF. Si on ne la précise pas, les éventuelles modifications de l'image écraseront l'image source. </li>
<li>le masque de sortie, au format TIFF. (pas écrit si non précisé).</li>
</ul>
<p>Dans le cas où seul le masque associé nous intéresse, on ne réecrira jamais de nouvelle image, même si un chemin de sortie différent de l'entrée était précisé.</p>
<p>Si l'image traitée ne contient pas de nodata, le masque n'est pas écrit. En effet, on considère une image sans masque associé comme une image pleine.</p>
<p>On peut également définir 3 couleurs : </p><ul>
<li>la couleur cible (obligatoire) : les pixels de cette couleur sont ceux potentiellement considérés comme du nodata et modifiés. On peut également préciser une tolérance en complément de la valeur. L'option "touche les bords" précise la façon dont on identifie les pixels de nodata. </li>
<li>la nouvelle couleur de nodata : si elle n'est pas précisée, cela veut dire qu'on ne veut pas la modifier </li>
<li>la nouvelle couleur de donnée : si elle n'est pas précisée, cela veut dire qu'on ne veut pas la modifier</li>
</ul>
<div class="image">
<img src="manageNodata.png" alt=""/>
</div>
<p>Cet outil n'est qu'une interface permettant l'utilisation de la classe TiffNodataManager, qui réalise réellement tous les traitements.</p>
<p>Le nombre de canaux du fichier en entrée et les valeurs de nodata renseignée doivent être cohérents. </p>
</div><h2 class="groupheader">Documentation des fonctions</h2>
<a id="a7b3d9b8e072456b074bb9c0759952916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b3d9b8e072456b074bb9c0759952916">&#9670;&nbsp;</a></span>error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void error </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>error_code</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Affiche un message d'erreur, l'utilisation de la commande et sort en erreur. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>message d'erreur </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">error_code</td><td>code de retour, -1 par défaut </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction principale de l'outil manageNodata. </p>
<p>Tout est contenu dans cette fonction. </p><dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>nombre de paramètres </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>tableau des paramètres </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>code de retour, 0 en cas de succès, -1 sinon </dd></dl>

</div>
</div>
<a id="a2ef30c42cbc289d899a8be5d2d8f77d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ef30c42cbc289d899a8be5d2d8f77d0">&#9670;&nbsp;</a></span>usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Affiche l'utilisation et les différentes options de la commande manageNodata <a class="el" href="manageNodata_8cpp.html#aecfcd8d5595d8ba1a38ef3c624d1186a">help</a>. </p>
<p>L'affichage se fait dans la sortie d'erreur </p>

</div>
</div>
<h2 class="groupheader">Documentation des variables</h2>
<a id="aecfcd8d5595d8ba1a38ef3c624d1186a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecfcd8d5595d8ba1a38ef3c624d1186a">&#9670;&nbsp;</a></span>help</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string help</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Valeur initiale :</b><div class="fragment"><div class="line">= std::string(<span class="stringliteral">&quot;\nmanageNodata version &quot;</span>) + std::string(VERSION) + <span class="stringliteral">&quot;\n\n&quot;</span></div>
<div class="line"> </div>
<div class="line">        <span class="stringliteral">&quot;Manage nodata pixel color in a TIFF file, byte samples\n\n&quot;</span></div>
<div class="line"> </div>
<div class="line">        <span class="stringliteral">&quot;Usage: manageNodata -target &lt;VAL&gt; [-tolerance &lt;VAL&gt;] [-touch-edges] -format &lt;VAL&gt; [-nodata &lt;VAL&gt;] [-data &lt;VAL&gt;] &lt;INPUT FILE&gt; [&lt;OUTPUT FILE&gt;] [-mask-out &lt;VAL&gt;]\n\n&quot;</span></div>
<div class="line"> </div>
<div class="line">        <span class="stringliteral">&quot;Colors are provided in decimal format, one integer value per sample\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;Parameters:\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      -target         color to consider as nodata / modify\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      -tolerance      a positive integer, to define a delta for target value&#39;s comparison\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      -touche-edges   method to identify nodata pixels (all &#39;target value&#39; pixels or just those at the edges\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      -data           new color for data pixel which contained target color\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      -nodata         new color for nodata pixel\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      -mask-out       path to the mask to write\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      -format         image&#39;s samples&#39; format : uint8 or float32\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      -channels       samples per pixel,number of samples in provided colors\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      -d              debug logger activation\n\n&quot;</span></div>
<div class="line"> </div>
<div class="line">        <span class="stringliteral">&quot;Examples :\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      - to keep pure white for nodata, and write a new image :\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;              manageNodata -target 255,255,255 -touch-edges -data 254,254,254 input_image.tif output_image.tif -channels 3 -format uint8\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      - to write the associated mask (all &#39;-99999&#39; pixels are nodata, with a tolerance):\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;              manageNodata -target -99999 -tolerance 10 input_image.tif -mask-out mask.tif -channels 1 -format float32\n\n&quot;</span></div>
</div><!-- fragment --><p>Message d'usage de la commande manageNodata </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="manageNodata_8cpp.html">manageNodata.cpp</a></li>
    <li class="footer">Généré par <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
